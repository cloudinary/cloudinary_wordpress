!function(){"use strict";var e={"./src/js/components/featured-image.js":function(e,t,r){r.r(t);var o=r("@wordpress/i18n"),n=r("@wordpress/components"),i=r("@wordpress/data"),s=r("react/jsx-runtime");let a=e=>(0,s.jsx)(s.Fragment,{children:e.modalClass&&(0,s.jsx)(n.ToggleControl,{label:(0,o.__)("Overwrite Cloudinary Global Transformations","cloudinary"),checked:e.overwrite_featured_transformations,onChange:t=>e.setOverwrite(t),className:"cloudinary-overwrite-transformations"})});a=(0,i.withSelect)((e=>{var t;return{overwrite_featured_transformations:null!==(t=e("core/editor")?.getEditedPostAttribute("meta")._cloudinary_featured_overwrite)&&void 0!==t&&t}}))(a),a=(0,i.withDispatch)((e=>({setOverwrite:t=>{e("core/editor").editPost({meta:{_cloudinary_featured_overwrite:t}})}})))(a);const d=e=>class extends e{render(){return(0,s.jsxs)(s.Fragment,{children:[super.render(),!!this.props.value&&(0,s.jsx)(a,{...this.props})]})}},l={_init(){wp.hooks.addFilter("editor.MediaUpload","cloudinary/filter-featured-image",d)}};l._init(),t.default=l},"./src/js/components/terms-inspector.js":function(e,t,r){r.r(t);var o=r("@wordpress/data");const n={wrapper:null,query:{per_page:-1,orderby:"name",order:"asc",_fields:"id,name,parent",context:"view"},available:{},taxonomies:null,fetchWait:null,_init(){if(this.wrapper=document.getElementById("cld-tax-items"),!this.wrapper)return;const{getTaxonomies:e}=(0,o.select)("core");this.fetchWait=setInterval((()=>{this.taxonomies=e(),this.taxonomies&&(clearInterval(this.fetchWait),this._init_listeners())}),1e3)},_init_listeners(){this.taxonomies.forEach((e=>{e.rest_base&&e.visibility.public&&(0,o.subscribe)((()=>{const t=e.slug,r=e.hierarchical,{isResolving:n}=(0,o.select)("core/data"),i=["taxonomy",t,this.query];this.available[t]=null,r&&(this.available[t]=(0,o.select)("core").getEntityRecords("taxonomy",t,this.query)),n("core","getEntityRecords",i)||this.event(e)}))}))},event(e){const t=(0,o.select)("core/editor").getEditedPostAttribute(e.rest_base);if(!t)return;const r=[...t],n=Array.from(this.wrapper.querySelectorAll(`[data-item*="${e.slug}"]`));[...r].forEach((t=>{const r=this.wrapper.querySelector(`[data-item="${e.slug}:${t}"]`);n.splice(n.indexOf(r),1),null===r&&this.createItem(this.getItem(e,t))})),n.forEach((e=>{e.parentNode.removeChild(e)}))},createItem(e){if(!e||!e.id)return;const t=document.createElement("li"),r=document.createElement("span"),o=document.createElement("input"),n=document.createTextNode(e.name);t.classList.add("cld-tax-order-list-item"),t.dataset.item=`${e.taxonomy}:${e.id}`,o.classList.add("cld-tax-order-list-item-input"),o.type="hidden",o.name="cld_tax_order[]",o.value=`${e.taxonomy}:${e.id}`,r.className="dashicons dashicons-menu cld-tax-order-list-item-handle",t.appendChild(r),t.appendChild(o),t.appendChild(n),this.wrapper.appendChild(t)},getItem(e,t){let r={};if(null===this.available[e.slug])r=(0,o.select)("core").getEntityRecord("taxonomy",e.slug,t);else for(const o of this.available[e.slug])if(o.id===t){r=o,r.taxonomy=e.slug;break}return r}};window.addEventListener("load",(()=>n._init())),t.default=n},"./src/js/components/video.js":function(e,t,r){r.r(t);var o=r("@wordpress/i18n"),n=r("@wordpress/data"),i=r("@wordpress/components"),s=r("react/jsx-runtime");const a={_init(){"undefined"!=typeof CLD_VIDEO_PLAYER&&wp.hooks.addFilter("blocks.registerBlockType","Cloudinary/Media/Video",(function(e,t){return"core/video"===t&&("off"!==CLD_VIDEO_PLAYER.video_autoplay_mode&&(e.attributes.autoplay.default=!0),"on"===CLD_VIDEO_PLAYER.video_loop&&(e.attributes.loop.default=!0),"off"===CLD_VIDEO_PLAYER.video_controls&&(e.attributes.controls.default=!1)),e}))}};t.default=a,a._init();wp.hooks.addFilter("blocks.registerBlockType","cloudinary/addAttributes",(function(e,t){return"core/image"!==t&&"core/video"!==t||(e.attributes||(e.attributes={}),e.attributes.overwrite_transformations={type:"boolean"},e.attributes.transformations={type:"boolean"}),e}));const d=e=>{const{attributes:{overwrite_transformations:t},setAttributes:r}=e;return(0,s.jsx)(i.PanelBody,{title:(0,o.__)("Transformations","cloudinary"),children:(0,s.jsx)(i.ToggleControl,{label:(0,o.__)("Overwrite Global Transformations","cloudinary"),checked:t,onChange:e=>{r({overwrite_transformations:e})}})})};let l=e=>{const{setAttributes:t,media:r}=e,{InspectorControls:o}=wp.editor;return r&&r.transformations&&t({transformations:!0}),(0,s.jsx)(o,{children:(0,s.jsx)(d,{...e})})};l=(0,n.withSelect)(((e,t)=>({...t,media:t.attributes.id?e("core").getMedia(t.attributes.id):null})))(l);wp.hooks.addFilter("editor.BlockEdit","cloudinary/filterEdit",(e=>t=>{const{name:r}=t,o="core/image"===r||"core/video"===r;return(0,s.jsxs)(s.Fragment,{children:[o?(0,s.jsx)(l,{...t}):null,(0,s.jsx)(e,{...t})]})}),20)},"@wordpress/api-fetch":function(e){e.exports=window.wp.apiFetch},"@wordpress/components":function(e){e.exports=window.wp.components},"@wordpress/data":function(e){e.exports=window.wp.data},"@wordpress/i18n":function(e){e.exports=window.wp.i18n},"react/jsx-runtime":function(e){e.exports=window.ReactJSXRuntime}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,r),i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};!function(){r.r(o),r.d(o,{cloudinaryBlocks:function(){return a}});var e=r("@wordpress/api-fetch"),t=r.n(e),n=r("./src/js/components/video.js"),i=r("./src/js/components/featured-image.js"),s=r("./src/js/components/terms-inspector.js");window.$=window.jQuery,t().use(((e,t)=>{if("cors"===e.mode)return t(e);if(e.url)try{const r=new URL(e.url,location.href);if(r.protocol!==location.protocol||r.hostname!==location.hostname||r.port!==location.port)return t(e)}catch{return t(e)}return e.headers||(e.headers={}),e.headers["x-cld-fetch-from-editor"]="true",t(e)}));const a={Video:n.default,Featured:i.default,Terms:s.default}}()}();
//# sourceMappingURL=block-editor.js.map